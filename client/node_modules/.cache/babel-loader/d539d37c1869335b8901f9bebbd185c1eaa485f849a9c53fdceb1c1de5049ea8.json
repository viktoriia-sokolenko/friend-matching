{"ast":null,"code":"import{useState,useEffect}from'react';import{useAuth}from'../AuthContext';import{useNavigate}from\"react-router-dom\";import PlaceholderImage from'../assets/logo.png';import ProfileForm from'../components/ProfileForm';import AccountForm from'../components/AccountForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Profile=()=>{var _student$user_profile,_student$user_profile2,_student$user_profile3,_student$user_profile4,_student$user_profile5,_student$user_profile6;const{token,userId}=useAuth();const[student,setStudent]=useState({});const[userProfile,setUserProfile]=useState({});const[isNew,setIsNew]=useState(false);const[editMode,setEditMode]=useState(false);const navigate=useNavigate();const[error,setError]=useState(\"\");const editProfile=()=>{setEditMode(true);};const deleteProfile=async()=>{if(window.confirm(\"Are you sure you want to delete your profile? This action cannot be undone.\")){try{const response=await fetch(\"/users/profiles/\".concat(userId),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}});if(response.ok){navigate(\"/profiles\");setError(\"\");}else{setError(\"Failed to delete profile.\");}}catch(error){console.error(\"Error deleting profile:\",error);setError(\"Failed to delete profile.\");}}};useEffect(()=>{const getProfile=async()=>{try{const response=await fetch(\"/users/profiles/\".concat(userId),{method:'GET',headers:{Authorization:\"Bearer \".concat(token)}});const data=await response.json();setStudent(data);if(data.user_profiles){setIsNew(false);setUserProfile(data.user_profiles);}else{setIsNew(true);}}catch(error){console.error(\"Error fetching student profile:\",error);}};getProfile();},[userId,token]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Profile\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"icons\",src:PlaceholderImage,alt:\"Northwestern Logo\"}),editMode?/*#__PURE__*/_jsxs(\"div\",{className:\"ColumnPage\",children:[/*#__PURE__*/_jsx(AccountForm,{user:student}),/*#__PURE__*/_jsx(ProfileForm,{user:userProfile,new:isNew})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"ProfileText\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[student.first_name,\" \",student.last_name]}),isNew?/*#__PURE__*/_jsx(\"button\",{onClick:editProfile,children:\"Edit\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:((_student$user_profile=student.user_profiles)===null||_student$user_profile===void 0?void 0:_student$user_profile.major)||'Unknown major'}),((_student$user_profile2=student.user_profiles)===null||_student$user_profile2===void 0?void 0:_student$user_profile2.year)&&/*#__PURE__*/_jsxs(\"h2\",{children:[\"Class of \",student.user_profiles.year]}),((_student$user_profile3=student.user_profiles)===null||_student$user_profile3===void 0?void 0:_student$user_profile3.rankings)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Interests:\"}),/*#__PURE__*/_jsx(\"ul\",{children:Object.entries((_student$user_profile4=student.user_profiles)===null||_student$user_profile4===void 0?void 0:_student$user_profile4.rankings).sort((a,b)=>b[1]-a[1]).map(_ref=>{let[interest,ranking]=_ref;return/*#__PURE__*/_jsxs(\"li\",{children:[interest,\": \",ranking]},interest);})})]}),((_student$user_profile5=student.user_profiles)===null||_student$user_profile5===void 0?void 0:_student$user_profile5.bio)&&/*#__PURE__*/_jsx(\"p\",{children:student.user_profiles.bio}),((_student$user_profile6=student.user_profiles)===null||_student$user_profile6===void 0?void 0:_student$user_profile6.contact_info)&&/*#__PURE__*/_jsxs(\"h4\",{children:[\"Contact me at: \",student.user_profiles.contact_info]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonRow\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:editProfile,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteProfile,children:\"Delete\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error})]})]})]});};export default Profile;","map":{"version":3,"names":["useState","useEffect","useAuth","useNavigate","PlaceholderImage","ProfileForm","AccountForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_student$user_profile","_student$user_profile2","_student$user_profile3","_student$user_profile4","_student$user_profile5","_student$user_profile6","token","userId","student","setStudent","userProfile","setUserProfile","isNew","setIsNew","editMode","setEditMode","navigate","error","setError","editProfile","deleteProfile","window","confirm","response","fetch","concat","method","headers","Authorization","ok","console","getProfile","data","json","user_profiles","className","children","src","alt","user","new","first_name","last_name","onClick","major","year","rankings","Object","entries","sort","a","b","map","_ref","interest","ranking","bio","contact_info"],"sources":["/Users/viktoriiasokolenko/Documents/disc/my-app/client/src/pages/Profile.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useAuth } from '../AuthContext';\nimport { useNavigate } from \"react-router-dom\";\nimport PlaceholderImage from '../assets/logo.png'\nimport ProfileForm from '../components/ProfileForm';\nimport AccountForm from '../components/AccountForm';\n\nconst Profile = () => {\n    const { token, userId } = useAuth();\n    const [student, setStudent] = useState({});\n    const [userProfile, setUserProfile] = useState({});\n    const [isNew, setIsNew] = useState(false);\n    const [editMode, setEditMode] = useState(false);\n    const navigate = useNavigate();\n    const [error, setError] = useState(\"\");\n    const editProfile = () => {\n        setEditMode(true);\n    };\n    const deleteProfile = async () => {\n        if (window.confirm(\"Are you sure you want to delete your profile? This action cannot be undone.\")) {\n            try {\n                const response = await fetch(`/users/profiles/${userId}`, {\n                    method: 'DELETE',\n                    headers: {\n                        Authorization: `Bearer ${token}`,\n                    },\n                });\n                if (response.ok) {\n                    navigate(`/profiles`);\n                    setError(\"\");\n                } else {\n                    setError(\"Failed to delete profile.\");\n                }\n            } catch (error) {\n                console.error(\"Error deleting profile:\", error);\n                setError(\"Failed to delete profile.\");\n            }\n        }\n    };\n    useEffect(() => {\n        const getProfile = async () => {\n          try {\n            const response = await fetch(`/users/profiles/${userId}`,{\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            const data = await response.json();\n            setStudent(data);\n            if (data.user_profiles) {\n                setIsNew(false);\n                setUserProfile(data.user_profiles);\n            } else {\n                setIsNew(true);\n            }\n          } catch (error) {\n            console.error(\"Error fetching student profile:\", error);\n          }\n        };\n        getProfile();\n      }, [userId, token]);\n    return (\n        <div className = \"Profile\">\n            <img \n                    className = \"icons\"\n                    src={PlaceholderImage}\n                    alt={`Northwestern Logo`}\n            />\n            {editMode?\n            (\n                <div className = \"ColumnPage\">\n                <AccountForm user={student}/>\n                <ProfileForm user={userProfile} new={isNew}/>\n                </div>\n            )\n            :\n            (<div className = \"ProfileText\">\n                <h1>{student.first_name} {student.last_name}</h1>\n                {isNew?\n                (<button onClick = {editProfile}>Edit</button>)\n                : \n                (\n                <>\n                <h2>{student.user_profiles?.major || 'Unknown major'}</h2>\n                {student.user_profiles?.year && (<h2>Class of {student.user_profiles.year}</h2>)}\n                {student.user_profiles?.rankings && \n                (<>\n                <h4>Interests:</h4>\n                <ul>\n                {Object.entries(student.user_profiles?.rankings)\n                  .sort((a, b) => b[1] - a[1])\n                  .map(([interest, ranking]) => (\n                  <li key={interest}>\n                    {interest}: {ranking}\n                  </li>\n                ))}\n                </ul>\n                </>)\n                }\n                {student.user_profiles?.bio && (<p>{student.user_profiles.bio}</p>)}\n                {student.user_profiles?.contact_info && (<h4>Contact me at: {student.user_profiles.contact_info}</h4>)}\n                <div className=\"buttonRow\">\n                <button onClick = {editProfile}>Edit</button>\n                <button onClick = {deleteProfile}>Delete</button>\n                </div>\n                {error && <p className=\"error\">{error}</p>}\n                </>\n                )\n                }\n            </div>)\n            }\n        </div>\n    )\n\n}\nexport default Profile;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,gBAAgB,CACxC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CACjD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpD,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAClB,KAAM,CAAEC,KAAK,CAAEC,MAAO,CAAC,CAAGnB,OAAO,CAAC,CAAC,CACnC,KAAM,CAACoB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC1C,KAAM,CAACwB,WAAW,CAAEC,cAAc,CAAC,CAAGzB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAClD,KAAM,CAAC0B,KAAK,CAAEC,QAAQ,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CACzC,KAAM,CAAC4B,QAAQ,CAAEC,WAAW,CAAC,CAAG7B,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAA8B,QAAQ,CAAG3B,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAGhC,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAiC,WAAW,CAAGA,CAAA,GAAM,CACtBJ,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,CACD,KAAM,CAAAK,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAIC,MAAM,CAACC,OAAO,CAAC,6EAA6E,CAAC,CAAE,CAC/F,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,oBAAAC,MAAA,CAAoBlB,MAAM,EAAI,CACtDmB,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACLC,aAAa,WAAAH,MAAA,CAAYnB,KAAK,CAClC,CACJ,CAAC,CAAC,CACF,GAAIiB,QAAQ,CAACM,EAAE,CAAE,CACbb,QAAQ,YAAY,CAAC,CACrBE,QAAQ,CAAC,EAAE,CAAC,CAChB,CAAC,IAAM,CACHA,QAAQ,CAAC,2BAA2B,CAAC,CACzC,CACJ,CAAE,MAAOD,KAAK,CAAE,CACZa,OAAO,CAACb,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CC,QAAQ,CAAC,2BAA2B,CAAC,CACzC,CACJ,CACJ,CAAC,CACD/B,SAAS,CAAC,IAAM,CACZ,KAAM,CAAA4C,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAAC,KAAK,oBAAAC,MAAA,CAAoBlB,MAAM,EAAG,CACrDmB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACLC,aAAa,WAAAH,MAAA,CAAYnB,KAAK,CAClC,CACJ,CAAC,CAAC,CACF,KAAM,CAAA0B,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClCxB,UAAU,CAACuB,IAAI,CAAC,CAChB,GAAIA,IAAI,CAACE,aAAa,CAAE,CACpBrB,QAAQ,CAAC,KAAK,CAAC,CACfF,cAAc,CAACqB,IAAI,CAACE,aAAa,CAAC,CACtC,CAAC,IAAM,CACHrB,QAAQ,CAAC,IAAI,CAAC,CAClB,CACF,CAAE,MAAOI,KAAK,CAAE,CACda,OAAO,CAACb,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACzD,CACF,CAAC,CACDc,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACxB,MAAM,CAAED,KAAK,CAAC,CAAC,CACrB,mBACIV,KAAA,QAAKuC,SAAS,CAAG,SAAS,CAAAC,QAAA,eACtB1C,IAAA,QACQyC,SAAS,CAAG,OAAO,CACnBE,GAAG,CAAE/C,gBAAiB,CACtBgD,GAAG,oBAAsB,CAChC,CAAC,CACDxB,QAAQ,cAELlB,KAAA,QAAKuC,SAAS,CAAG,YAAY,CAAAC,QAAA,eAC7B1C,IAAA,CAACF,WAAW,EAAC+C,IAAI,CAAE/B,OAAQ,CAAC,CAAC,cAC7Bd,IAAA,CAACH,WAAW,EAACgD,IAAI,CAAE7B,WAAY,CAAC8B,GAAG,CAAE5B,KAAM,CAAC,CAAC,EACxC,CAAC,cAGThB,KAAA,QAAKuC,SAAS,CAAG,aAAa,CAAAC,QAAA,eAC3BxC,KAAA,OAAAwC,QAAA,EAAK5B,OAAO,CAACiC,UAAU,CAAC,GAAC,CAACjC,OAAO,CAACkC,SAAS,EAAK,CAAC,CAChD9B,KAAK,cACLlB,IAAA,WAAQiD,OAAO,CAAIxB,WAAY,CAAAiB,QAAA,CAAC,MAAI,CAAQ,CAAC,cAG9CxC,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACA1C,IAAA,OAAA0C,QAAA,CAAK,EAAApC,qBAAA,CAAAQ,OAAO,CAAC0B,aAAa,UAAAlC,qBAAA,iBAArBA,qBAAA,CAAuB4C,KAAK,GAAI,eAAe,CAAK,CAAC,CACzD,EAAA3C,sBAAA,CAAAO,OAAO,CAAC0B,aAAa,UAAAjC,sBAAA,iBAArBA,sBAAA,CAAuB4C,IAAI,gBAAKjD,KAAA,OAAAwC,QAAA,EAAI,WAAS,CAAC5B,OAAO,CAAC0B,aAAa,CAACW,IAAI,EAAK,CAAE,CAC/E,EAAA3C,sBAAA,CAAAM,OAAO,CAAC0B,aAAa,UAAAhC,sBAAA,iBAArBA,sBAAA,CAAuB4C,QAAQ,gBAC/BlD,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACD1C,IAAA,OAAA0C,QAAA,CAAI,YAAU,CAAI,CAAC,cACnB1C,IAAA,OAAA0C,QAAA,CACCW,MAAM,CAACC,OAAO,EAAA7C,sBAAA,CAACK,OAAO,CAAC0B,aAAa,UAAA/B,sBAAA,iBAArBA,sBAAA,CAAuB2C,QAAQ,CAAC,CAC7CG,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAAC,CAAC,CAAC,CAAGD,CAAC,CAAC,CAAC,CAAC,CAAC,CAC3BE,GAAG,CAACC,IAAA,MAAC,CAACC,QAAQ,CAAEC,OAAO,CAAC,CAAAF,IAAA,oBACzBzD,KAAA,OAAAwC,QAAA,EACGkB,QAAQ,CAAC,IAAE,CAACC,OAAO,GADbD,QAEL,CAAC,EACN,CAAC,CACE,CAAC,EACH,CAAE,CAEH,EAAAlD,sBAAA,CAAAI,OAAO,CAAC0B,aAAa,UAAA9B,sBAAA,iBAArBA,sBAAA,CAAuBoD,GAAG,gBAAK9D,IAAA,MAAA0C,QAAA,CAAI5B,OAAO,CAAC0B,aAAa,CAACsB,GAAG,CAAI,CAAE,CAClE,EAAAnD,sBAAA,CAAAG,OAAO,CAAC0B,aAAa,UAAA7B,sBAAA,iBAArBA,sBAAA,CAAuBoD,YAAY,gBAAK7D,KAAA,OAAAwC,QAAA,EAAI,iBAAe,CAAC5B,OAAO,CAAC0B,aAAa,CAACuB,YAAY,EAAK,CAAE,cACtG7D,KAAA,QAAKuC,SAAS,CAAC,WAAW,CAAAC,QAAA,eAC1B1C,IAAA,WAAQiD,OAAO,CAAIxB,WAAY,CAAAiB,QAAA,CAAC,MAAI,CAAQ,CAAC,cAC7C1C,IAAA,WAAQiD,OAAO,CAAIvB,aAAc,CAAAgB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC5C,CAAC,CACLnB,KAAK,eAAIvB,IAAA,MAAGyC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEnB,KAAK,CAAI,CAAC,EACxC,CACD,EAEA,CAAE,EAEN,CAAC,CAGd,CAAC,CACD,cAAe,CAAAlB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}