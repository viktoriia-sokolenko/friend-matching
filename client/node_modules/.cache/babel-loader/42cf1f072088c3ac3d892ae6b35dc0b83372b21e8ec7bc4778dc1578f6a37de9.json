{"ast":null,"code":"var _jsxFileName = \"/Users/viktoriiasokolenko/Documents/disc/my-app/src/pages/Profiles.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport ProfileCard from '../components/ProfileCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profiles = () => {\n  _s();\n  const [allProfiles, setAllProfiles] = useState([]);\n  const [filteredProfiles, setFilteredProfiles] = useState([]);\n  const [searchInput, setSearchInput] = useState('');\n  const [selectedYears, setSelectedYears] = useState([]);\n  const [allYears, setAllYears] = useState([]);\n  const handleYearChange = e => {\n    const year = e.target.value;\n    setSelectedYears(prevYears => prevYears.includes(year) ? prevYears.filter(selectedYear => selectedYear !== year) : [...prevYears, year]);\n  };\n  useEffect(() => {\n    const getAllProfiles = async () => {\n      const token = localStorage.getItem('access_token');\n      try {\n        const response = await fetch('/users/profiles', {\n          method: 'GET',\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        const data_with_profiles = data.filter(student => student.user_profiles !== null);\n        setAllProfiles(data_with_profiles);\n        setFilteredProfiles(data_with_profiles);\n        setAllYears(Array.from(new Set(data_with_profiles.map(profile => profile.user_profiles.year))));\n      } catch (error) {\n        console.error(\"Error fetching profiles:\", error);\n      }\n    };\n    getAllProfiles();\n  }, []);\n  useEffect(() => {\n    const filterProfiles = async () => {\n      if (allProfiles) {\n        const filteredData = allProfiles.filter(profile => {\n          const matchesFlag = Object.entries(flagFilters).some(([flag, isChecked]) => isChecked && (post.flag === flag || post.flag === \"\"));\n          if (!matchesFlag) return false;\n          if (selectedBook != \"\" && post.book != selectedBook) {\n            return false;\n          }\n          if (searchInput === \"\") {\n            return true;\n          }\n          return (selectedYears.length === 0 || selectedYears.includes(profile.year)) && profile.toLowerCase().includes(searchInput.toLowerCase());\n        });\n        setFilteredPosts(filteredData);\n      }\n    };\n    filterProfiles;\n  }, [searchInput, allProfiles, selectedYears]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Filters\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search by keywords\",\n        className: \"input-name\",\n        onChange: e => setSearchInput(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: allYears.map(year => /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: year,\n            checked: selectedYears.includes(year),\n            onChange: handleYearChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), year]\n        }, year, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Grid\",\n      children: filteredProfiles.map(student => /*#__PURE__*/_jsxDEV(ProfileCard, {\n        id: student.id,\n        firstName: student.first_name,\n        lastName: student.last_name,\n        year: student.user_profiles.year,\n        major: student.user_profiles.major,\n        bio: student.user_profiles.bio,\n        image: student.profilepicture\n      }, student.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 20\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n};\n_s(Profiles, \"pt08V9T4LKr5KcKj8TBPDPk/8hY=\");\n_c = Profiles;\nexport default Profiles;\nvar _c;\n$RefreshReg$(_c, \"Profiles\");","map":{"version":3,"names":["useState","useEffect","ProfileCard","jsxDEV","_jsxDEV","Profiles","_s","allProfiles","setAllProfiles","filteredProfiles","setFilteredProfiles","searchInput","setSearchInput","selectedYears","setSelectedYears","allYears","setAllYears","handleYearChange","e","year","target","value","prevYears","includes","filter","selectedYear","getAllProfiles","token","localStorage","getItem","response","fetch","method","headers","Authorization","ok","Error","status","data","json","data_with_profiles","student","user_profiles","Array","from","Set","map","profile","error","console","filterProfiles","filteredData","matchesFlag","Object","entries","flagFilters","some","flag","isChecked","post","selectedBook","book","length","toLowerCase","setFilteredPosts","className","children","type","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","checked","id","firstName","first_name","lastName","last_name","major","bio","image","profilepicture","_c","$RefreshReg$"],"sources":["/Users/viktoriiasokolenko/Documents/disc/my-app/src/pages/Profiles.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport ProfileCard from '../components/ProfileCard';\n\n\nconst Profiles = () => {\n    const [allProfiles, setAllProfiles] = useState([]);\n    const [filteredProfiles, setFilteredProfiles] = useState([]);\n    const [searchInput, setSearchInput] = useState('');\n    const [selectedYears, setSelectedYears] = useState([]);\n    const [allYears, setAllYears] = useState([]);\n    const handleYearChange = (e) => {\n        const year = e.target.value;\n        setSelectedYears((prevYears) =>\n            prevYears.includes(year)\n                ? prevYears.filter((selectedYear) => selectedYear !== year)\n                : [...prevYears, year]\n        );\n    };\n    useEffect(() => {\n        const getAllProfiles = async () => {\n            const token = localStorage.getItem('access_token');\n            try {\n            const response = await fetch('/users/profiles', {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const data = await response.json();\n            const data_with_profiles = data.filter(student => student.user_profiles !== null);\n            setAllProfiles(data_with_profiles);\n            setFilteredProfiles(data_with_profiles);\n            setAllYears(Array.from(new Set(data_with_profiles.map((profile) => profile.user_profiles.year))));\n          } catch (error) {\n            console.error(\"Error fetching profiles:\", error);\n          }\n        };\n        getAllProfiles();\n      }, []);\n      useEffect(() => {\n        const filterProfiles = async () => {\n            if (allProfiles) {\n                const filteredData = allProfiles.filter((profile) => {\n                  const matchesFlag = Object.entries(flagFilters).some(\n                      ([flag, isChecked]) => isChecked && (post.flag === flag || post.flag === \"\")\n                  );\n                  if (!matchesFlag) return false;\n                  if (selectedBook != \"\" && post.book != selectedBook){\n                      return false;\n                  }\n                  if (searchInput === \"\") {\n                    return true;\n                  }\n                  return (selectedYears.length === 0 || selectedYears.includes(profile.year))&&profile.toLowerCase().includes(searchInput.toLowerCase());\n                });\n            \n                setFilteredPosts(filteredData);\n              }\n        };\n        filterProfiles;\n      }, [searchInput, allProfiles, selectedYears]);\n    return (\n        <div className='Page'>\n        <div className = \"Filters\">\n            <input\n                type=\"text\"\n                placeholder=\"Search by keywords\"\n                className='input-name'\n                onChange={(e) => setSearchInput(e.target.value)}\n            />\n            <div className = \"row\">\n                {allYears.map((year) => (\n                    <label key={year}>\n                        <input\n                            type=\"checkbox\"\n                            value={year}\n                            checked={selectedYears.includes(year)}\n                            onChange={handleYearChange}\n                        />\n                        {year}\n                    </label>\n                ))}\n            </div>\n        </div> \n        <div className=\"Grid\">\n            {filteredProfiles.map((student) => (\n                   <ProfileCard \n                        key={student.id} \n                        id={student.id} \n                        firstName={student.first_name}\n                        lastName={student.last_name} \n                        year={student.user_profiles.year}\n                        major={student.user_profiles.major}\n                        bio = {student.user_profiles.bio}\n                        image = {student.profilepicture}\n                    />\n                ))\n            }\n        </div>\n        </div>\n    )\n\n}\nexport default Profiles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}