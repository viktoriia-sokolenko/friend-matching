{"ast":null,"code":"var _jsxFileName = \"/Users/viktoriiasokolenko/Documents/disc/my-app/src/pages/Profiles.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport ProfileCard from '../components/ProfileCard';\nimport SavedProfiles from './SavedProfiles';\nimport { useAuth } from '../AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profiles = () => {\n  _s();\n  const [allProfiles, setAllProfiles] = useState([]);\n  const {\n    savedProfiles\n  } = useAuth();\n  const [filteredProfiles, setFilteredProfiles] = useState([]);\n  const [searchInput, setSearchInput] = useState('');\n  const [selectedYears, setSelectedYears] = useState([]);\n  const [allYears, setAllYears] = useState([]);\n  const [includeSavedProfiles, setIncludeSavedProfiles] = useState(false);\n  const handleYearChange = e => {\n    const year = e.target.value;\n    setSelectedYears(prevYears => {\n      if (prevYears.includes(year)) {\n        return prevYears.filter(selectedYear => selectedYear !== year);\n      } else {\n        return [...prevYears, year];\n      }\n    });\n  };\n  const handleSavedProfilesChange = () => {\n    setIncludeSavedProfiles(prevState => !prevState);\n  };\n  useEffect(() => {\n    const getAllProfiles = async () => {\n      const token = localStorage.getItem('access_token');\n      try {\n        const response = await fetch('/users/profiles', {\n          method: 'GET',\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        const data_with_profiles = data.filter(student => student.user_profiles !== null);\n        setAllProfiles(data_with_profiles);\n        setFilteredProfiles(data_with_profiles);\n        setAllYears(Array.from(new Set(data_with_profiles.map(profile => profile.user_profiles.year.toString()))));\n      } catch (error) {\n        console.error(\"Error fetching profiles:\", error);\n      }\n    };\n    getAllProfiles();\n  }, []);\n  useEffect(() => {\n    const filterProfiles = () => {\n      if (allProfiles) {\n        const filteredData = allProfiles.filter(profile => {\n          var _profile$user_profile, _profile$user_profile2;\n          const matchesYear = selectedYears.length === 0 || selectedYears.includes(profile.user_profiles.year.toString());\n          if (!matchesYear) return false;\n          if (searchInput === \"\") return true;\n          const lowerSearchInput = searchInput.toLowerCase();\n          const bioMatches = (_profile$user_profile = profile.user_profiles.bio) === null || _profile$user_profile === void 0 ? void 0 : _profile$user_profile.toLowerCase().includes(lowerSearchInput);\n          const majorMatches = (_profile$user_profile2 = profile.user_profiles.major) === null || _profile$user_profile2 === void 0 ? void 0 : _profile$user_profile2.toLowerCase().includes(lowerSearchInput);\n          const firstNameMatches = profile.first_name.toLowerCase().includes(lowerSearchInput);\n          const lastNameMatches = profile.last_name.toLowerCase().includes(lowerSearchInput);\n          return bioMatches || majorMatches || firstNameMatches || lastNameMatches;\n        });\n        if (includeSavedProfiles) {\n          filteredData = filteredData.filter(student => savedProfiles.some(profile => profile.saved_id === id));\n        }\n        setFilteredProfiles(filteredData);\n      }\n    };\n    filterProfiles();\n  }, [searchInput, allProfiles, selectedYears, includeSavedProfiles]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search by keywords\",\n        className: \"input-name\",\n        onChange: e => setSearchInput(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Graduation Year:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: allYears.map(year => /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: year,\n            checked: selectedYears.includes(year),\n            onChange: handleYearChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this), year]\n        }, year, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Grid\",\n      children: filteredProfiles.map(student => /*#__PURE__*/_jsxDEV(ProfileCard, {\n        id: student.id,\n        firstName: student.first_name,\n        lastName: student.last_name,\n        year: student.user_profiles.year,\n        major: student.user_profiles.major,\n        bio: student.user_profiles.bio,\n        image: student.profilepicture\n      }, student.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(Profiles, \"V4HQQZfCTpOPbliU5NisBnxtV/8=\", false, function () {\n  return [useAuth];\n});\n_c = Profiles;\nexport default Profiles;\nvar _c;\n$RefreshReg$(_c, \"Profiles\");","map":{"version":3,"names":["useState","useEffect","ProfileCard","SavedProfiles","useAuth","jsxDEV","_jsxDEV","Profiles","_s","allProfiles","setAllProfiles","savedProfiles","filteredProfiles","setFilteredProfiles","searchInput","setSearchInput","selectedYears","setSelectedYears","allYears","setAllYears","includeSavedProfiles","setIncludeSavedProfiles","handleYearChange","e","year","target","value","prevYears","includes","filter","selectedYear","handleSavedProfilesChange","prevState","getAllProfiles","token","localStorage","getItem","response","fetch","method","headers","Authorization","ok","Error","status","data","json","data_with_profiles","student","user_profiles","Array","from","Set","map","profile","toString","error","console","filterProfiles","filteredData","_profile$user_profile","_profile$user_profile2","matchesYear","length","lowerSearchInput","toLowerCase","bioMatches","bio","majorMatches","major","firstNameMatches","first_name","lastNameMatches","last_name","some","saved_id","id","className","children","type","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","checked","firstName","lastName","image","profilepicture","_c","$RefreshReg$"],"sources":["/Users/viktoriiasokolenko/Documents/disc/my-app/src/pages/Profiles.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport ProfileCard from '../components/ProfileCard';\nimport SavedProfiles from './SavedProfiles';\nimport { useAuth } from '../AuthContext';\n\n\nconst Profiles = () => {\n    const [allProfiles, setAllProfiles] = useState([]);\n    const { savedProfiles } = useAuth();\n    const [filteredProfiles, setFilteredProfiles] = useState([]);\n    const [searchInput, setSearchInput] = useState('');\n    const [selectedYears, setSelectedYears] = useState([]);\n    const [allYears, setAllYears] = useState([]);\n    const [includeSavedProfiles, setIncludeSavedProfiles] = useState(false);\n    const handleYearChange = (e) => {\n        const year = e.target.value;\n        setSelectedYears((prevYears) => {\n            if (prevYears.includes(year)) {\n                return prevYears.filter((selectedYear) => selectedYear !== year);\n            } else {\n                return [...prevYears, year];\n            }\n        });\n    };\n    const handleSavedProfilesChange = () => {\n        setIncludeSavedProfiles(prevState => !prevState);\n    };\n    useEffect(() => {\n        const getAllProfiles = async () => {\n            const token = localStorage.getItem('access_token');\n            try {\n            const response = await fetch('/users/profiles', {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const data = await response.json();\n            const data_with_profiles = data.filter(student => student.user_profiles !== null);\n            setAllProfiles(data_with_profiles);\n            setFilteredProfiles(data_with_profiles);\n            setAllYears(Array.from(new Set(data_with_profiles.map((profile) => profile.user_profiles.year.toString()))));\n          } catch (error) {\n            console.error(\"Error fetching profiles:\", error);\n          }\n        };\n        getAllProfiles();\n      }, []);\n      useEffect(() => {\n        const filterProfiles = () => {\n            if (allProfiles) {\n                const filteredData = allProfiles.filter((profile) => {\n                  const matchesYear= (selectedYears.length === 0 || selectedYears.includes(profile.user_profiles.year.toString()));\n                  if (!matchesYear) return false;\n                  if (searchInput === \"\") return true;\n                  const lowerSearchInput = searchInput.toLowerCase();\n                  const bioMatches = (profile.user_profiles.bio?.toLowerCase().includes(lowerSearchInput));\n                  const majorMatches = (profile.user_profiles.major?.toLowerCase().includes(lowerSearchInput));\n                  const firstNameMatches = (profile.first_name.toLowerCase().includes(lowerSearchInput));\n                  const lastNameMatches = (profile.last_name.toLowerCase().includes(lowerSearchInput));\n                  return (bioMatches || majorMatches || firstNameMatches || lastNameMatches);\n                });\n                if (includeSavedProfiles) {\n                    filteredData = filteredData.filter(student => savedProfiles.some((profile) => profile.saved_id === id));\n                }\n                setFilteredProfiles(filteredData);\n              }\n        };\n        filterProfiles();\n      }, [searchInput, allProfiles, selectedYears, includeSavedProfiles]);\n    return (\n        <div className='Page'>\n            <div className = \"Form\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search by keywords\"\n                    className='input-name'\n                    onChange={(e) => setSearchInput(e.target.value)}\n                />\n                <p>Graduation Year:</p>\n                <div>\n                    {allYears.map((year) => (\n                        <label key={year}>\n                            <input\n                                type=\"checkbox\"\n                                value = {year}\n                                checked={selectedYears.includes(year)}\n                                onChange={handleYearChange}\n                            />\n                            {year}\n                        </label>\n                    ))}\n                </div>\n            </div> \n            <div className=\"Grid\">\n                {filteredProfiles.map((student) => (\n                    <ProfileCard \n                            key={student.id} \n                            id={student.id} \n                            firstName={student.first_name}\n                            lastName={student.last_name} \n                            year={student.user_profiles.year}\n                            major={student.user_profiles.major}\n                            bio = {student.user_profiles.bio}\n                            image = {student.profilepicture}\n                        />\n                    ))\n                }\n            </div>\n        </div>\n    )\n\n}\nexport default Profiles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}